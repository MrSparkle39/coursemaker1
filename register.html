<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Account Â· CourseMaker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="universal-header.js"></script>
  <style>
    .glass{backdrop-filter:blur(12px);background:rgba(15,23,42,.55)}
    .auth-card {
      background: rgba(30, 41, 59, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-100">
  
  <!-- Background decoration -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="mx-auto h-[420px] max-w-6xl bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-cyan-500/20 via-transparent to-transparent blur-3xl"></div>
  </div>

  <!-- Universal Header will be inserted here by universal-header.js -->

  <!-- Main Content -->
  <div class="flex items-center justify-center min-h-[calc(100vh-80px)] p-4">
    <div class="w-full max-w-md">
      
      <!-- Toggle Buttons -->
      <div class="flex mb-8 rounded-xl border border-white/10 bg-slate-800/60 p-1">
        <button id="btnShowLogin" class="flex-1 rounded-lg px-4 py-2 text-sm font-medium text-slate-300 transition-all hover:text-white">
          Sign In
        </button>
        <button id="btnShowSignup" class="flex-1 rounded-lg bg-cyan-500 px-4 py-2 text-sm font-medium text-slate-900 transition-all">
          Create Account
        </button>
      </div>

      <!-- Sign Up Form -->
      <div id="signupForm" class="auth-card rounded-2xl p-8 fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-white mb-2">Create your account</h2>
          <p class="text-slate-300">Start with our free plan - no credit card required</p>
        </div>

        <form id="registerForm" class="space-y-4">
          <div>
            <label class="block text-sm text-slate-300 mb-2">Full Name</label>
            <input type="text" id="signupName" required 
                   class="w-full rounded-lg border border-white/10 bg-slate-900 p-3 text-sm text-white" 
                   placeholder="Enter your full name">
          </div>
          
          <div>
            <label class="block text-sm text-slate-300 mb-2">Email Address</label>
            <input type="email" id="signupEmail" required 
                   class="w-full rounded-lg border border-white/10 bg-slate-900 p-3 text-sm text-white" 
                   placeholder="Enter your email">
          </div>
          
          <div>
            <label class="block text-sm text-slate-300 mb-2">Password</label>
            <input type="password" id="signupPassword" required 
                   class="w-full rounded-lg border border-white/10 bg-slate-900 p-3 text-sm text-white" 
                   placeholder="Create a password">
          </div>
          
          <div class="flex items-center gap-2">
            <input type="checkbox" id="agreeTerms" required class="w-4 h-4 accent-cyan-500">
            <label for="agreeTerms" class="text-sm text-slate-300">
              I agree to the <a href="#" class="text-cyan-400 hover:text-cyan-300">Terms of Service</a> and <a href="#" class="text-cyan-400 hover:text-cyan-300">Privacy Policy</a>
            </label>
          </div>
          
          <button type="submit" id="btnSignup" 
                  class="w-full rounded-xl bg-cyan-500 px-4 py-3 font-medium text-slate-900 hover:bg-cyan-400 transition-colors">
            Create Free Account
          </button>
        </form>
        
        <div class="mt-6 text-center">
          <p class="text-sm text-slate-400">
            Already have an account? 
            <a href="/login.html" class="text-cyan-400 hover:text-cyan-300 font-medium">Sign in</a>
          </p>
        </div>
      </div>

      <!-- Sign In Form (Hidden by default) -->
      <div id="loginForm" class="auth-card rounded-2xl p-8 fade-in hidden">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-white mb-2">Welcome back</h2>
          <p class="text-slate-300">Sign in to your CourseMaker account</p>
        </div>

        <form id="signinForm" class="space-y-4">
          <div>
            <label class="block text-sm text-slate-300 mb-2">Email Address</label>
            <input type="email" id="loginEmail" required 
                   class="w-full rounded-lg border border-white/10 bg-slate-900 p-3 text-sm text-white" 
                   placeholder="Enter your email">
          </div>
          
          <div>
            <label class="block text-sm text-slate-300 mb-2">Password</label>
            <input type="password" id="loginPassword" required 
                   class="w-full rounded-lg border border-white/10 bg-slate-900 p-3 text-sm text-white" 
                   placeholder="Enter your password">
          </div>
          
          <div class="flex items-center justify-between">
            <label class="flex items-center gap-2">
              <input type="checkbox" class="w-4 h-4 accent-cyan-500">
              <span class="text-sm text-slate-300">Remember me</span>
            </label>
            <a href="#" class="text-sm text-cyan-400 hover:text-cyan-300">Forgot password?</a>
          </div>
          
          <button type="submit" id="btnLogin" 
                  class="w-full rounded-xl bg-cyan-500 px-4 py-3 font-medium text-slate-900 hover:bg-cyan-400 transition-colors">
            Sign In
          </button>
        </form>
        
        <div class="mt-6 text-center">
          <p class="text-sm text-slate-400">
            Don't have an account? 
            <a href="/register.html" class="text-cyan-400 hover:text-cyan-300 font-medium">Create one</a>
          </p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Form toggle functionality
    document.getElementById('btnShowLogin').addEventListener('click', () => {
      document.getElementById('signupForm').classList.add('hidden');
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('btnShowLogin').classList.add('bg-cyan-500', 'text-slate-900');
      document.getElementById('btnShowLogin').classList.remove('text-slate-300');
      document.getElementById('btnShowSignup').classList.remove('bg-cyan-500', 'text-slate-900');
      document.getElementById('btnShowSignup').classList.add('text-slate-300');
    });

    document.getElementById('btnShowSignup').addEventListener('click', () => {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('signupForm').classList.remove('hidden');
      document.getElementById('btnShowSignup').classList.add('bg-cyan-500', 'text-slate-900');
      document.getElementById('btnShowSignup').classList.remove('text-slate-300');
      document.getElementById('btnShowLogin').classList.remove('bg-cyan-500', 'text-slate-900');
      document.getElementById('btnShowLogin').classList.add('text-slate-300');
    });

    // Registration form
    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = {
        name: document.getElementById('signupName').value,
        email: document.getElementById('signupEmail').value,
        password: document.getElementById('signupPassword').value,
        planType: 'free' // Start with free plan
      };

      try {
        const response = await fetch('/api/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          // Redirect to dashboard with free plan
          window.location.href = '/dashboard.html';
        } else {
          const error = await response.json();
          alert('Registration failed: ' + error.error);
        }
      } catch (error) {
        console.error('Registration error:', error);
        alert('Registration failed. Please try again.');
      }
    });

    // Login form
    document.getElementById('signinForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = {
        email: document.getElementById('loginEmail').value,
        password: document.getElementById('loginPassword').value
      };

      try {
        const response = await fetch('/api/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          window.location.href = '/dashboard.html';
        } else {
          const error = await response.json();
          alert('Login failed: ' + error.error);
        }
      } catch (error) {
        console.error('Login error:', error);
        alert('Login failed. Please try again.');
      }
    });
  </script>

  <!-- Universal Footer will be inserted here by universal-footer.js -->
  <div class="universal-footer-placeholder"></div>

  <!-- Universal Footer Script -->
  <script src="universal-footer.js"></script>
</body>
</html>
